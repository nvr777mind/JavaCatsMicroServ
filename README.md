# JavaCatsMicroServ

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Java –≤ —Å—Ç–∏–ª–µ **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Apache Kafka** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤.  
–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö Spring Boot‚Äë–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ Kafka‚Äë–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ–¥–Ω—è—Ç–æ–π —á–µ—Ä–µ–∑ Docker.

---

## üöÄ –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞

–°–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è *–Ω–µ –Ω–∞–ø—Ä—è–º—É—é*, –∞ —á–µ—Ä–µ–∑ **Kafka topics**, —á—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é event‚Äëdriven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

- **CatMicroservice** –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ç–∞) –≤ Kafka.
- **OwnerMicroservice** –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ –∏–ª–∏ –∫–æ—Ç–∞–º–∏.
- **ApiMicroservice** —Å–ª—É–∂–∏—Ç —à–ª—é–∑–æ–º –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –Ω–∞–ø—Ä—è–º—É—é **–∏** —á–µ—Ä–µ–∑ Kafka –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

Kafka –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å,
- –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å,
- —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤,
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.

---

## üß∞ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Java 17+**
- **Spring Boot**
- **Spring Web**
- **Spring Kafka**
- **Apache Kafka**
- **Maven (multi‚Äëmodule)**
- **Docker / Docker Compose**

---

## üîÑ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ Kafka

### üì§ –ü—Ä–∏–º–µ—Ä: CatMicroservice –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ

–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ—Ç, —Å–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:

–¢–æ–ø–∏–∫: `cats.events`

–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:

```json
{
  "event": "CAT_CREATED",
  "payload": {
    "id": 1,
    "name": "Barsik",
    "age": 3,
    "color": "black",
    "ownerId": 42
  }
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å–∞–º —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –±–µ–∑ –ø—Ä—è–º—ã—Ö REST-–∑–∞–ø—Ä–æ—Å–æ–≤.

---

## ‚öôÔ∏è –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–í –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```bash
mvn clean package
```

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (—á–µ—Ä–µ–∑ Docker)

Kafka –∏ –≤—Å–µ —Ç—Ä–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
cd docker
docker compose up --build
```

–ü–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:
- Kafka: `localhost:9092`
- Zookeeper: `localhost:2181`
- ApiMicroservice: –æ–±—ã—á–Ω–æ `localhost:8080`
- CatMicroservice: `localhost:8081`
- OwnerMicroservice: `localhost:8082`

---

## üîå REST API (–ø—Ä–∏–º–µ—Ä)

### –°–æ–∑–¥–∞—Ç—å –∫–æ—Ç–∞

```bash
curl -X POST http://localhost:8080/api/cats  -H "Content-Type: application/json"  -d '{"name":"Barsik","age":3,"color":"black","ownerId":42}'
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:
1. CatMicroservice —Å–æ–∑–¥–∞—ë—Ç –∫–æ—Ç–∞
2. –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ Kafka
3. OwnerMicroservice –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ

---

## üê≥ Kafka –≤ Docker Compose

–§–∞–π–ª `docker/docker-compose.yml` –ø–æ–¥–Ω–∏–º–∞–µ—Ç:

- `zookeeper`
- `kafka`
- –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- —Å–µ—Ç—å –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

–ü—Ä–∏–º–µ—Ä —Å–µ–∫—Ü–∏–∏ Kafka:

```yaml
kafka:
  image: confluentinc/cp-kafka
  ports:
    - "9092:9092"
  environment:
    KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
    KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092
```

---

